spring:
  application:
    name: zhgd-workflow-server
  profiles:
    active: local

  # åŠ è½½ Nacos é…ç½®
  config:
    import:
      - optional:nacos:zhgd-workflow-service?group=workflow&namespace=bf644fca-1276-415a-89de-428331e96a46
      - optional:nacos:workflow-common?group=workflow&namespace=bf644fca-1276-415a-89de-428331e96a46

  # ğŸ‘‡ cloud å¿…é¡»å’Œ config åŒçº§ï¼Œéƒ½åœ¨ spring ä¸‹ï¼
  cloud:
    nacos:
      server-addr: 172.16.9.88:18848
      username: nacos
      password: sHL4RErzeB@kJMVnXPKfh9j

  main:
    allow-circular-references: true # å…è®¸å¾ªç¯ä¾èµ–ï¼Œå› ä¸ºé¡¹ç›®æ˜¯ä¸‰å±‚æ¶æ„ï¼Œæ— æ³•é¿å…è¿™ä¸ªæƒ…å†µã€‚

  # Servlet é…ç½®
  servlet:
    # æ–‡ä»¶ä¸Šä¼ ç›¸å…³é…ç½®é¡¹
    multipart:
      max-file-size: 16MB # å•ä¸ªæ–‡ä»¶å¤§å°
      max-request-size: 32MB # è®¾ç½®æ€»ä¸Šä¼ çš„æ–‡ä»¶å¤§å°

  # Jackson é…ç½®é¡¹
  jackson:
    serialization:
      write-dates-as-timestamps: true # è®¾ç½® Date çš„æ ¼å¼ï¼Œä½¿ç”¨æ—¶é—´æˆ³
      write-date-timestamps-as-nanoseconds: false # è®¾ç½®ä¸ä½¿ç”¨ nanoseconds çš„æ ¼å¼ã€‚ä¾‹å¦‚è¯´ 1611460870.401ï¼Œè€Œæ˜¯ç›´æ¥ 1611460870401
      write-durations-as-timestamps: true # è®¾ç½® Duration çš„æ ¼å¼ï¼Œä½¿ç”¨æ—¶é—´æˆ³
      fail-on-empty-beans: false # å…è®¸åºåˆ—åŒ–æ— å±æ€§çš„ Bean

  # Cache é…ç½®é¡¹
  cache:
    type: REDIS
    redis:
      time-to-live: 1h # è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º 1 å°æ—¶

server:
  servlet:
    encoding:
      enabled: true
      charset: UTF-8 # å¿…é¡»è®¾ç½® UTF-8ï¼Œé¿å… WebFlux æµå¼è¿”å›ï¼ˆAI åœºæ™¯ï¼‰ä¼šä¹±ç é—®é¢˜
      force: true

--- #################### æ¥å£æ–‡æ¡£é…ç½® ####################

springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui
  default-flat-param-object: true # å‚è§ https://doc.xiaominfo.com/docs/faq/v4/knife4j-parameterobject-flat-param æ–‡æ¡£

knife4j:
  enable: true
  setting:
    language: zh_cn

# å·¥ä½œæµ Flowable é…ç½®
flowable:
  # 1. false: é»˜è®¤å€¼ï¼ŒFlowable å¯åŠ¨æ—¶ï¼Œå¯¹æ¯”æ•°æ®åº“è¡¨ä¸­ä¿å­˜çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒ¹é…ã€‚å°†æŠ›å‡ºå¼‚å¸¸
  # 2. true: å¯åŠ¨æ—¶ä¼šå¯¹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦‚æœè¡¨å­˜åœ¨ï¼Œä¸åšå¤„ç†ï¼Œåä¹‹ï¼Œè‡ªåŠ¨åˆ›å»ºè¡¨
  # 3. create_drop: å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ï¼Œå…³é—­æ—¶è‡ªåŠ¨åˆ é™¤è¡¨
  # 4. drop_create: å¯åŠ¨æ—¶ï¼Œåˆ é™¤æ—§è¡¨ï¼Œå†åˆ›å»ºæ–°è¡¨
  database-schema-update: true # è®¾ç½®ä¸º falseï¼Œå¯é€šè¿‡ https://github.com/flowable/flowable-sql åˆå§‹åŒ–
  db-history-used: true # flowable6 é»˜è®¤ true ç”Ÿæˆä¿¡æ¯è¡¨ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®
  check-process-definitions: false # è®¾ç½®ä¸º falseï¼Œç¦ç”¨ /resources/processes è‡ªåŠ¨éƒ¨ç½² BPMN XML æµç¨‹
  history-level: audit # fullï¼šä¿å­˜å†å²æ•°æ®çš„æœ€é«˜çº§åˆ«ï¼Œå¯ä¿å­˜å…¨éƒ¨æµç¨‹ç›¸å…³ç»†èŠ‚ï¼ŒåŒ…æ‹¬æµç¨‹æµè½¬å„èŠ‚ç‚¹å‚æ•°

# MyBatis Plus çš„é…ç½®é¡¹
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true # è™½ç„¶é»˜è®¤ä¸º true ï¼Œä½†æ˜¯è¿˜æ˜¯æ˜¾ç¤ºå»æŒ‡å®šä¸‹ã€‚
  global-config:
    db-config:
      id-type: NONE # â€œæ™ºèƒ½â€æ¨¡å¼ï¼ŒåŸºäº IdTypeEnvironmentPostProcessor + æ•°æ®æºçš„ç±»å‹ï¼Œè‡ªåŠ¨é€‚é…æˆ AUTOã€INPUT æ¨¡å¼ã€‚
#      id-type: AUTO # è‡ªå¢ IDï¼Œé€‚åˆ MySQL ç­‰ç›´æ¥è‡ªå¢çš„æ•°æ®åº“
#      id-type: INPUT # ç”¨æˆ·è¾“å…¥ IDï¼Œé€‚åˆ Oracleã€PostgreSQLã€Kingbaseã€DB2ã€H2 æ•°æ®åº“
#      id-type: ASSIGN_ID # åˆ†é… IDï¼Œé»˜è®¤ä½¿ç”¨é›ªèŠ±ç®—æ³•ã€‚æ³¨æ„ï¼ŒOracleã€PostgreSQLã€Kingbaseã€DB2ã€H2 æ•°æ®åº“æ—¶ï¼Œéœ€è¦å»é™¤å®ä½“ç±»ä¸Šçš„ @KeySequence æ³¨è§£
      logic-delete-value: 1 # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)
      logic-not-delete-value: 0 # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)
    banner: false # å…³é—­æ§åˆ¶å°çš„ Banner æ‰“å°
  type-aliases-package: ${zhgd.info.base-package}.module.*.dal.dataobject
  encryptor:
    password: XDV71a+xqStEA3WH # åŠ è§£å¯†çš„ç§˜é’¥ï¼Œå¯ä½¿ç”¨ https://www.imaegoo.com/2020/aes-key-generator/ ç½‘ç«™ç”Ÿæˆ

mybatis-plus-join:
  banner: false # æ˜¯å¦æ‰“å° mybatis plus join bannerï¼Œé»˜è®¤true
  sub-table-logic: true # å…¨å±€å¯ç”¨å‰¯è¡¨é€»è¾‘åˆ é™¤ï¼Œé»˜è®¤trueã€‚å…³é—­åå…³è”æŸ¥è¯¢ä¸ä¼šåŠ å‰¯è¡¨é€»è¾‘åˆ é™¤
  ms-cache: true # æ‹¦æˆªå™¨MappedStatementç¼“å­˜ï¼Œé»˜è®¤ true
  table-alias: t # è¡¨åˆ«å(é»˜è®¤ t)
  logic-del-type: on # å‰¯è¡¨é€»è¾‘åˆ é™¤æ¡ä»¶çš„ä½ç½®ï¼Œæ”¯æŒ WHEREã€ONï¼Œé»˜è®¤ ON

# Spring Data Redis é…ç½®
spring:
  data:
    redis:
      repositories:
        enabled: false # é¡¹ç›®æœªä½¿ç”¨åˆ° Spring Data Redis çš„ Repositoryï¼Œæ‰€ä»¥ç›´æ¥ç¦ç”¨ï¼Œä¿è¯å¯åŠ¨é€Ÿåº¦

# VO è½¬æ¢ï¼ˆæ•°æ®ç¿»è¯‘ï¼‰ç›¸å…³
easy-trans:
  is-enable-global: false # ã€é»˜è®¤ç¦ç”¨ï¼Œå¯¹æ€§èƒ½ç¡®è®¤å‹åŠ›å¤§ã€‘å¯ç”¨å…¨å±€ç¿»è¯‘ï¼ˆæ‹¦æˆªæ‰€æœ‰ SpringMVC ResponseBody è¿›è¡Œè‡ªåŠ¨ç¿»è¯‘ )ã€‚å¦‚æœå¯¹äºæ€§èƒ½è¦æ±‚å¾ˆé«˜å¯å…³é—­æ­¤é…ç½®ï¼Œæˆ–é€šè¿‡ @IgnoreTrans å¿½ç•¥æŸä¸ªæ¥å£



--- #################### æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³ ####################

# rocketmq é…ç½®é¡¹ï¼Œå¯¹åº” RocketMQProperties é…ç½®ç±»
rocketmq:
  # Producer é…ç½®é¡¹
  producer:
    group: ${spring.application.name}_PRODUCER # ç”Ÿäº§è€…åˆ†ç»„

spring:
  # Kafka é…ç½®é¡¹ï¼Œå¯¹åº” KafkaProperties é…ç½®ç±»
  kafka:
    # Kafka Producer é…ç½®é¡¹
    producer:
      acks: 1 # 0-ä¸åº”ç­”ã€‚1-leader åº”ç­”ã€‚all-æ‰€æœ‰ leader å’Œ follower åº”ç­”ã€‚
      retries: 3 # å‘é€å¤±è´¥æ—¶ï¼Œé‡è¯•å‘é€çš„æ¬¡æ•°
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer # æ¶ˆæ¯çš„ value çš„åºåˆ—åŒ–
    # Kafka Consumer é…ç½®é¡¹
    consumer:
      auto-offset-reset: earliest # è®¾ç½®æ¶ˆè´¹è€…åˆ†ç»„æœ€åˆçš„æ¶ˆè´¹è¿›åº¦ä¸º earliest ã€‚å¯å‚è€ƒåšå®¢ https://blog.csdn.net/lishuangzhe7047/article/details/74530417 ç†è§£
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json.trusted.packages: '*'
    # Kafka Consumer Listener ç›‘å¬å™¨é…ç½®
    listener:
      missing-topics-fatal: false # æ¶ˆè´¹ç›‘å¬æ¥å£ç›‘å¬çš„ä¸»é¢˜ä¸å­˜åœ¨æ—¶ï¼Œé»˜è®¤ä¼šæŠ¥é”™ã€‚æ‰€ä»¥é€šè¿‡è®¾ç½®ä¸º false ï¼Œè§£å†³æŠ¥é”™


zhgd:
  ai:
    gemini: # è°·æ­Œ Gemini
      enable: true
      api-key: AIzaSyAVoBxgoFvvte820vEQMma2LKBnC98bqMQ
      model: gemini-2.5-flash
    doubao: # å­—èŠ‚è±†åŒ…
      enable: true
      api-key: 5c1b5747-26d2-4ebd-a4e0-dd0e8d8b4272
      model: doubao-1-5-lite-32k-250115
    hunyuan: # è…¾è®¯æ··å…ƒ
      enable: true
      api-key: sk-abc
      model: hunyuan-turbo
    siliconflow: # ç¡…åŸºæµåŠ¨
      enable: true
      api-key: sk-epsakfenqnyzoxhmbucsxlhkdqlcbnimslqoivkshalvdozz
      model: deepseek-ai/DeepSeek-R1-Distill-Qwen-7B
    xinghuo: # è®¯é£æ˜Ÿç«
      enable: true
      appKey: 75b161ed2aef4719b275d6e7f2a4d4cd
      secretKey: YWYxYWI2MTA4ODI2NGZlYTQyNjAzZTcz
      model: x1
    baichuan: # ç™¾å·æ™ºèƒ½
      enable: true
      api-key: sk-abc
      model: Baichuan4-Turbo
    midjourney:
      enable: true
  #    base-url: https://api.holdai.top/mj-relax/mj
      base-url: https://api.holdai.top/mj
      api-key: sk-dZEPiVaNcT3FHhef51996bAa0bC74806BeAb620dA5Da10Bf
      notify-url: http://java.nat300.top/admin-api/ai/image/midjourney/notify
    suno:
      enable: true
  #    base-url: https://suno-55ishh05u-status2xxs-projects.vercel.app
      base-url: http://127.0.0.1:3001
    web-search:
      enable: true
      api-key: sk-40500e52840f4d24b956d0b1d80d9abe

--- #################### æ™ºæ…§å·¥åœ°ç›¸å…³é…ç½® ####################

zhgd:
  info:
    version: 1.0.0
    base-package: cn.iocoder.zhgd
  web:
    admin-ui:
      url: http://dashboard.zhgd.iocoder.cn # Admin ç®¡ç†åå° UI çš„åœ°å€
  xss:
    enable: false
    exclude-urls: # å¦‚ä¸‹ä¸¤ä¸ª urlï¼Œä»…ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå»æ‰é…ç½®ä¹Ÿæ²¡å…³ç³»
      - ${spring.boot.admin.context-path}/** # ä¸å¤„ç† Spring Boot Admin çš„è¯·æ±‚
      - ${management.endpoints.web.base-path}/** # ä¸å¤„ç† Actuator çš„è¯·æ±‚
  security:
    permit-all_urls:
      - /admin-api/mp/open/** # å¾®ä¿¡å…¬ä¼—å·å¼€æ”¾å¹³å°ï¼Œå¾®ä¿¡å›è°ƒæ¥å£ï¼Œä¸éœ€è¦ç™»å½•
  api-encrypt:
    enable: true # æ˜¯å¦å¼€å¯ API åŠ å¯†
    algorithm: AES # åŠ å¯†ç®—æ³•ï¼Œæ”¯æŒ AESã€RSA ç­‰
    request-key: 52549111389893486934626385991395 # ã€AES æ¡ˆä¾‹ã€‘è¯·æ±‚åŠ å¯†çš„ç§˜é’¥ï¼Œï¼Œå¿…é¡» 16ã€24ã€32 ä½
    response-key: 96103715984234343991809655248883 # ã€AES æ¡ˆä¾‹ã€‘å“åº”åŠ å¯†çš„ç§˜é’¥ï¼ŒAES æ¡ˆä¾‹ï¼Œå¿…é¡» 16ã€24ã€32 ä½
#    request-key: MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAKWzasimcZ1icsWDPVdTXcZs1DkOWjI+m9bTQU8aOqflnomkr6QO1WWeSHBHzuJGsTlV/ZY2pFfq/NstKC94hBjx7yioYJvzb2bKN/Uy4j5nM3iCF//u0RiFkkY8j0Bt/EWoFTOb6RHf8cHIAjbYYtP3pYzbpCIwryfe0g//KIuzAgMBAAECgYADDjZrYcpZjR2xr7RbXmGtzYbyUGXwZEAqa3XaWBD51J2iSyOkAlQEDjGmxGQ3vvb4qDHHadWI+3/TKNeDXJUO+xTVJrnismK5BsHyC6dfxlIK/5BAuknryTca/3UoA1yomS9ZlF3Q0wcecaDoEnSmZEaTrp9T3itPAz4KnGjv5QJBAN5mNcfu6iJ5ktNvEdzqcxkKwbXb9Nq1SLnmTvt+d5TPX7eQ9fCwtOfVu5iBLhhZzb5PJ7pSN3Zt6rl5/jPOGv0CQQC+vETX9oe1wbxZSv6/RBGy0Xow6GndbJwvd89PcAJ2h+OJXWtg/rRHB3t9EQm7iis0XbZTapj19E4U6l8EibhvAkEA1CvYpRwmHKu1SqdM+GBnW/2qHlBwwXJvpoK02TOm674HR/4w0+YRQJfkd7LOAgcyxJuJgDTNmtt0MmzS+iNoFQJAMVSUIZ77XoDq69U/qcw7H5qaFcgmiUQr6QL9tTftCyb+LGri+MUnby96OtCLSdvkbLjIDS8GvKYhA7vSM2RDNQJBAKGyVVnFFIrbK3yuwW71yvxQEGoGxlgvZSezZ4vGgqTxrr9HvAtvWLwR6rpe6ybR/x8uUtoW7NRBWgpiIFwjvY4= # ã€RSA æ¡ˆä¾‹ã€‘è¯·æ±‚è§£å¯†çš„ç§é’¥
#    response-key: MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDh/CHyBcS/zEfVyINVA7+c9Xxl0CPdxPMK1OIjxaLy/7BLfbkoEpI8onQtjuzfpuxCraDem9bu3BMF0pMH95HytI3Vi0kGjaV+WLIalwgc2w37oA2sbsmKzQOP7SDLO5s2QJNAD7kVwd+Q5rqaLu2MO0xVv+0IUJhn83hClC0L5wIDAQAB # ã€RSA æ¡ˆä¾‹ã€‘å“åº”åŠ å¯†çš„å…¬é’¥
  websocket:
    enable: true # websocketçš„å¼€å…³
    path: /infra/ws # è·¯å¾„
    sender-type: local # æ¶ˆæ¯å‘é€çš„ç±»å‹ï¼Œå¯é€‰å€¼ä¸º localã€redisã€rocketmqã€kafkaã€rabbitmq
    sender-rocketmq:
      topic: ${spring.application.name}-websocket # æ¶ˆæ¯å‘é€çš„ RocketMQ Topic
      consumer-group: ${spring.application.name}-websocket-consumer # æ¶ˆæ¯å‘é€çš„ RocketMQ Consumer Group
    sender-rabbitmq:
      exchange: ${spring.application.name}-websocket-exchange # æ¶ˆæ¯å‘é€çš„ RabbitMQ Exchange
      queue: ${spring.application.name}-websocket-queue # æ¶ˆæ¯å‘é€çš„ RabbitMQ Queue
    sender-kafka:
      topic: ${spring.application.name}-websocket # æ¶ˆæ¯å‘é€çš„ Kafka Topic
      consumer-group: ${spring.application.name}-websocket-consumer # æ¶ˆæ¯å‘é€çš„ Kafka Consumer Group
  swagger:
    title: èŠ‹é“å¿«é€Ÿå¼€å‘å¹³å°
    description: æä¾›ç®¡ç†åå°ã€ç”¨æˆ· App çš„æ‰€æœ‰åŠŸèƒ½
    version: ${zhgd.info.version}
    url: ${zhgd.web.admin-ui.url}
    email: xingyu4j@vip.qq.com
    license: MIT
    license-url: https://gitee.com/zhijiantianya/ruoyi-vue-pro/blob/master/LICENSE
  codegen:
    base-package: ${zhgd.info.base-package}
    db-schemas: ${spring.datasource.dynamic.datasource.master.name}
    front-type: 20 # å‰ç«¯æ¨¡ç‰ˆçš„ç±»å‹ï¼Œå‚è§ CodegenFrontTypeEnum æšä¸¾ç±»
    vo-type: 10 # VO çš„ç±»å‹ï¼Œå‚è§ CodegenVOTypeEnum æšä¸¾ç±»
    delete-batch-enable: true # æ˜¯å¦ç”Ÿæˆæ‰¹é‡åˆ é™¤æ¥å£
    unit-test-enable: false # æ˜¯å¦ç”Ÿæˆå•å…ƒæµ‹è¯•
  tenant: # å¤šç§Ÿæˆ·ç›¸å…³é…ç½®é¡¹
    enable: true
    ignore-urls:
      - /jmreport/* # ç§¯æœ¨æŠ¥è¡¨ï¼Œæ— æ³•æºå¸¦ç§Ÿæˆ·ç¼–å·
    ignore-visit-urls:
      - /admin-api/system/user/profile/**
      - /admin-api/system/auth/**
    ignore-tables:
    ignore-caches:
      - user_role_ids
      - permission_menu_ids
      - oauth_client
      - notify_template
      - mail_account
      - mail_template
      - sms_template
      - iot:device
      - iot:thing_model_list
  sms-code: # çŸ­ä¿¡éªŒè¯ç ç›¸å…³çš„é…ç½®é¡¹
    expire-times: 10m
    send-frequency: 1m
    send-maximum-quantity-per-day: 10
    begin-code: 9999 # è¿™é‡Œé…ç½® 9999 çš„åŸå› æ˜¯ï¼Œæµ‹è¯•æ–¹ä¾¿ã€‚
    end-code: 9999 # è¿™é‡Œé…ç½® 9999 çš„åŸå› æ˜¯ï¼Œæµ‹è¯•æ–¹ä¾¿ã€‚
  trade:
    order:
      pay-expire-time: 2h # æ”¯ä»˜çš„è¿‡æœŸæ—¶é—´
      receive-expire-time: 14d # æ”¶è´§çš„è¿‡æœŸæ—¶é—´
      comment-expire-time: 7d # è¯„è®ºçš„è¿‡æœŸæ—¶é—´
      status-sync-to-wxa-enable: true # æ˜¯å¦åŒæ­¥è®¢å•çŠ¶æ€åˆ°å¾®ä¿¡å°ç¨‹åº
    express:
      client: kd_100
      kd-niao:
        api-key: cb022f1e-48f1-4c4a-a723-9001ac9676b8
        business-id: 1809751
        request-type: 1002 # å…è´¹ç‰ˆ 1002ï¼›ä»˜è´¹ç‰ˆ 8001
      kd100:
        key: pLXUGAwK5305
        customer: E77DF18BE109F454A5CD319E44BF5177
  iot:
    message-bus:
      type: redis # æ¶ˆæ¯æ€»çº¿çš„ç±»å‹

debug: false